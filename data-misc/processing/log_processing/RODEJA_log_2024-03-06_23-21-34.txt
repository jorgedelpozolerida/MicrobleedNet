
2024-03-06 23:21:46.259257
***********************************************
STARTING PROCESSING OF DATASET rodeja
***********************************************
CSV log: /datadrive_m2/jorge/datasets/processed_final/pRODEJA/log_2024-03-06_23-21-34.csv
TXT log: /datadrive_m2/jorge/datasets/processed_final/pRODEJA/log_2024-03-06_23-21-34.txt
Collected a total of 2 subjects (Failed: 0, Unprocessed: 2) out of 103 from log file /datadrive_m2/jorge/datasets/processed_final/pRODEJA/log_2024-03-06_16-55-59.csv
Succesfully deleted the following study: 00300
Succesfully deleted the following study: 00126
Processing 2 studies


2024-03-07 01:39:07.089300
Started processing 00126... (worker 1)
	Loading MRI scans and annotations...
		Combining labels from original masks
		---- Study found in manual fixes mapping CSV ----
			CMB-0
				Will use original radius of 3.8764460045576628, reduced to 1.1629338013672987
				Sphere created with radius 2.4684100922353225mm, size=63
			CMB-1
				Will use original radius of 3.6931585162727347, reduced to 1.1079475548818203
				Sphere created with radius 2.4684100922353225mm, size=63
			CMB-2
				Will use original radius of 3.5155579368600023, reduced to 1.0546673810580007
				Sphere created with radius 2.2387370303845966mm, size=47
			CMB-3
				Will use original radius of 4.180333582940752, reduced to 1.2541000748822255
				Sphere created with radius 2.8697816993790513mm, size=99
			CMB-4
				Will use original radius of 1.6257782104178669, reduced to 0.48773346312536003
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-5
				Will use original radius of 4.732581702312375, reduced to 1.4197745106937125
				Sphere created with radius 3.244012179295627mm, size=143
			CMB-6
				Will use original radius of 4.234279321029029, reduced to 1.2702837963087086
				Sphere created with radius 2.8697816993790513mm, size=99
			CMB-7
				Will use original radius of 6.350925782366103, reduced to 1.9052777347098306
				Sphere created with radius 4.256356254598725mm, size=323
			CMB-8
				Will use original radius of 8.237035444744992, reduced to 2.4711106334234976
				Sphere created with radius 5.5420057688384565mm, size=713
			CMB-9
				Will use original radius of 2.9266237766025056, reduced to 0.8779871329807517
				Sphere created with radius 1.8139158392989048mm, size=25
			CMB-10
				Will use original radius of 3.5283885540070252, reduced to 1.0585165662021074
				Sphere created with radius 2.2387370303845966mm, size=47
			CMB-11
				Will use original radius of 1.7641942770035128, reduced to 0.5292582831010538
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-12
				Will use original radius of 1.4951329367184953, reduced to 0.4485398810155486
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-13
				Will use original radius of 1.927573210407049, reduced to 0.5782719631221147
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-14
				Will use original radius of 2.139103257799201, reduced to 0.6417309773397603
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-15
				Will use original radius of 2.4420079599615385, reduced to 0.7326023879884616
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-16
				Will use original radius of 1.969490043685393, reduced to 0.5908470131056179
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-17
				Will use original radius of 2.009694771245976, reduced to 0.6029084313737928
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-18
				Will use original radius of 2.2387370303845966, reduced to 0.671621109115379
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-19
				Will use original radius of 2.139103257799201, reduced to 0.6417309773397603
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-20
				Will use original radius of 3.8497845968977753, reduced to 1.1549353790693326
				Sphere created with radius 2.4684100922353225mm, size=63
			CMB-21
				Will use original radius of 4.325507104155695, reduced to 1.2976521312467084
				Sphere created with radius 2.9079227945114825mm, size=103
			CMB-22
				Will use original radius of 2.7697068117865564, reduced to 0.8309120435359669
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-23
				Will use original radius of 4.975694384908111, reduced to 1.4927083154724332
				Sphere created with radius 3.360749724264337mm, size=159
			CMB-24
				Will use original radius of 3.15060696517646, reduced to 0.9451820895529379
				Sphere created with radius 1.9059132510127017mm, size=29
			CMB-25
				Will use original radius of 2.8305988897884706, reduced to 0.8491796669365411
				Sphere created with radius 1.8139158392989048mm, size=25
			CMB-26
				Will use original radius of 2.1215688358941103, reduced to 0.6364706507682331
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-27
				Will use original radius of 2.330213711589465, reduced to 0.6990641134768395
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-28
				Will use original radius of 2.7275754455243746, reduced to 0.8182726336573124
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-29
				Will use original radius of 2.4814019635976, reduced to 0.74442058907928
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-30
				Will use original radius of 1.7641942770035128, reduced to 0.5292582831010538
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-31
				Will use original radius of 2.139103257799201, reduced to 0.6417309773397603
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-32
				Will use original radius of 1.8610514726982001, reduced to 0.55831544180946
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-33
				Will use original radius of 3.969516035371225, reduced to 1.1908548106113674
				Sphere created with radius 2.5687583235794156mm, size=71
			CMB-34
				Will use original radius of 1.655344272701427, reduced to 0.49660328181042807
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-35
				Will use original radius of 3.228817520103468, reduced to 0.9686452560310403
				Sphere created with radius 2.067145461454275mm, size=37
		Loading of MRIs and annotations took 8125.469082117081 seconds!

	Using SWI as primary sequence
	Performing skull-stripping using SynthStrip algorithm...
		Performing skull-stripping on SWI...
	Skull-stripping of MRIs took 44.7493622303009 seconds!

	Cropping MRIs and annotations to brain-only regions...
		MRIs shape before cropping: (768, 768, 140)
		Annotations shape before cropping: (768, 768, 140)
		MRIs shape after cropping: (449, 521, 137)
		Annotations shape after cropping: (449, 521, 137)
	Cropping completed in 2.38 seconds.

	Fixing orientation to RAS and data types...
		Found SWI MRI sequence, shape (449, 521, 137) and orientation ('R', 'A', 'S')
		Found SWI annotation, shape (449, 521, 137) and orientation ('R', 'A', 'S')
	Orientation and data type adjustment took 0.0019161701202392578 seconds.

	Resampling MRIs and annotations maps...
		Resampling SWI MRI to isotropic of voxel size 0.5 using linear interpolation...
			Shape before resampling: (449, 521, 137)
			Shape after resampling: (302, 423, 388)
		Resampling SWI annotation to SWI using nearest interpolation...
			Shape before resampling: (449, 521, 137)
			Shape after resampling: (302, 423, 388)
	Resampling of MRIs and annotations took 10.744129657745361 seconds!

	Pruned from 37 CMBs to 36.
		All centers of mass were hit in processed mask.
	Cleaning final masks and checking new stats for annotations after transforms
		Number of processed CMBs: 36, Unique labels: [0. 1.], Counts: [49563739     1709]
	Correctly saved NIfTI images and metadata for study
	Correctly generated and saved CMB plots for study
	Removed temporary cache for study folder
Finished processing of 00126 in 8240.82 seconds (worker 1)!


2024-03-07 02:05:28.104668
Started processing 00300... (worker 0)
	Loading MRI scans and annotations...
		Combining labels from original masks
		---- Study found in manual fixes mapping CSV ----
			CMB-0
				Will use original radius of 2.3005262278302294, reduced to 0.6901578683490688
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-1
				Will use original radius of 4.077649665102033, reduced to 1.2232948995306099
				Sphere created with radius 2.7903001836133603mm, size=91
			CMB-2
				Will use original radius of 3.051308489600857, reduced to 0.9153925468802571
				Sphere created with radius 1.9059132510127017mm, size=29
			CMB-3
				Will use original radius of 2.415022237656582, reduced to 0.7245066712969745
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-4
				Will use original radius of 2.695101222399913, reduced to 0.8085303667199738
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-5
				Will use original radius of 2.0856030939994468, reduced to 0.625680928199834
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-6
				Will use original radius of 1.789400457879299, reduced to 0.5368201373637896
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-7
				Will use original radius of 1.8377858903240547, reduced to 0.5513357670972164
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-8
				Will use original radius of 1.711499967172251, reduced to 0.5134499901516753
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-9
				Will use original radius of 2.103739683417501, reduced to 0.6311219050252502
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-10
				Will use original radius of 2.285390748670416, reduced to 0.6856172246011247
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-11
				Will use original radius of 2.8889781342892826, reduced to 0.8666934402867847
				Sphere created with radius 1.8139158392989048mm, size=25
			CMB-12
				Will use original radius of 6.293186897548184, reduced to 1.887956069264455
				Sphere created with radius 4.148211199396802mm, size=299
			CMB-13
				Will use original radius of 1.4951329367184953, reduced to 0.4485398810155486
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-14
				Will use original radius of 2.4942591981125846, reduced to 0.7482777594337754
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-15
				Will use original radius of 2.139103257799201, reduced to 0.6417309773397603
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-16
				Will use original radius of 1.7641942770035128, reduced to 0.5292582831010538
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-17
				Will use original radius of 2.7275754455243746, reduced to 0.8182726336573124
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-18
				Will use original radius of 2.981339653545337, reduced to 0.8944018960636011
				Sphere created with radius 1.8139158392989048mm, size=25
			CMB-19
				Will use original radius of 2.2700520935637276, reduced to 0.6810156280691183
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-20
				Will use original radius of 0.6203504908994001, reduced to 0.18610514726982003
				Sphere created with radius 0.6203504908994001mm, size=1
			CMB-21
				Will use original radius of 3.733555642018398, reduced to 1.1200666926055194
				Sphere created with radius 2.4684100922353225mm, size=63
			CMB-22
				Will use original radius of 1.8377858903240547, reduced to 0.5513357670972164
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-23
				Will use original radius of 1.5299158709729348, reduced to 0.4589747612918804
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-24
				Will use original radius of 2.139103257799201, reduced to 0.6417309773397603
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-25
				Will use original radius of 2.048352189765887, reduced to 0.6145056569297661
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-26
				Will use original radius of 3.0079601661525035, reduced to 0.902388049845751
				Sphere created with radius 1.9059132510127017mm, size=29
			CMB-27
				Will use original radius of 3.5725769016050326, reduced to 1.0717730704815098
				Sphere created with radius 2.2387370303845966mm, size=47
			CMB-28
				Will use original radius of 1.8377858903240547, reduced to 0.5513357670972164
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-29
				Will use original radius of 2.738230145283347, reduced to 0.821469043585004
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-30
				Will use original radius of 4.014457771229203, reduced to 1.2043373313687609
				Sphere created with radius 2.7903001836133603mm, size=91
			CMB-31
				Will use original radius of 1.8139158392989048, reduced to 0.5441747517896715
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-32
				Will use original radius of 2.71683684833277, reduced to 0.815051054499831
				Sphere created with radius 1.711499967172251mm, size=21
			CMB-33
				Will use original radius of 3.15060696517646, reduced to 0.9451820895529379
				Sphere created with radius 1.9059132510127017mm, size=29
			CMB-34
				Will use original radius of 1.789400457879299, reduced to 0.5368201373637896
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-35
				Will use original radius of 1.4202480846149885, reduced to 0.4260744253844965
				Sphere created with radius 1.2903810207421493mm, size=9
			CMB-36
				Will use original radius of 2.1215688358941103, reduced to 0.6364706507682331
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-37
				Will use original radius of 1.2407009817988, reduced to 0.37221029453964
				Sphere created with radius 1.0607844179470554mm, size=5
			CMB-38
				Will use original radius of 2.2065205075171996, reduced to 0.6619561522551599
				Sphere created with radius 1.4586516277963593mm, size=13
			CMB-39
				Will use original radius of 1.5299158709729348, reduced to 0.4589747612918804
				Sphere created with radius 1.2903810207421493mm, size=9
		Loading of MRIs and annotations took 9708.474927902222 seconds!

	Using SWI as primary sequence
	Performing skull-stripping using SynthStrip algorithm...
		Performing skull-stripping on SWI...
	Skull-stripping of MRIs took 47.85671424865723 seconds!

	Cropping MRIs and annotations to brain-only regions...
		MRIs shape before cropping: (768, 768, 150)
		Annotations shape before cropping: (768, 768, 150)
		MRIs shape after cropping: (440, 554, 143)
		Annotations shape after cropping: (440, 554, 143)
	Cropping completed in 2.27 seconds.

	Fixing orientation to RAS and data types...
		Found SWI MRI sequence, shape (440, 554, 143) and orientation ('R', 'A', 'S')
		Found SWI annotation, shape (440, 554, 143) and orientation ('R', 'A', 'S')
	Orientation and data type adjustment took 0.001960277557373047 seconds.

	Resampling MRIs and annotations maps...
		Resampling SWI MRI to isotropic of voxel size 0.5 using linear interpolation...
			Shape before resampling: (440, 554, 143)
			Shape after resampling: (320, 380, 301)
		Resampling SWI annotation to SWI using nearest interpolation...
			Shape before resampling: (440, 554, 143)
			Shape after resampling: (320, 380, 301)
	Resampling of MRIs and annotations took 10.367778301239014 seconds!

	Pruned from 39 CMBs to 39.
		All centers of mass were hit in processed mask.
	Cleaning final masks and checking new stats for annotations after transforms
		Number of processed CMBs: 39, Unique labels: [0. 1.], Counts: [36600790      810]
	Correctly saved NIfTI images and metadata for study
	Correctly generated and saved CMB plots for study
	ISSUE: number of original CMBs differ before (40) and after (38) preprocessing
	Removed temporary cache for study folder
Finished processing of 00300 in 9821.84 seconds (worker 0)!


2024-03-07 02:05:28.178995
***********************************************
FINISHED PROCESSING OF DATASET rodeja
Succesful studies: 2, Failed studies: 0
***********************************************
